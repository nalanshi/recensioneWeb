<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recensioni - ReviewDiver!</title>
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/pages.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <!-- HEADER_PLACEHOLDER -->

  <main id="main-content" class="main-content">
    <!-- Hero Section -->
    <section class="reviews-hero">
      <div class="reviews-container">
        <h1>Recensioni</h1>
        <p>Scopri le recensioni più dettagliate e affidabili sui migliori prodotti tecnologici e gastronomici</p>
      </div>
    </section>

      <div class="reviews-container">
        <!-- Filtri -->
        <section class="reviews-filters" aria-label="Filtri recensioni">

        <div class="filter-group">
          <label for="rating-filter">Valutazione</label>
          <select id="rating-filter" class="filter-select">
            <option value="">Tutte le valutazioni</option>
            <option value="5">5 stelle</option>
            <option value="4">4+ stelle</option>
            <option value="3">3+ stelle</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="search-filter">Cerca</label>
          <input type="text" id="search-filter" class="filter-input" placeholder="Cerca recensioni...">
        </div>

        <div class="filter-group">
          <label for="sort-filter">Ordina per</label>
          <select id="sort-filter" class="filter-select">
            <option value="recent">Più recenti</option>
            <option value="rating">Valutazione</option>
            <option value="popular">Più popolari</option>
          </select>
        </div>
      </section>

  <section class="reviews-grid" id="reviews-grid" aria-label="Elenco recensioni">
        <!--REVIEWS_PLACEHOLDER-->
      </section>

      <!-- Carica Altri -->
      <div class="load-more">
        <button class="load-more-btn" id="load-more-btn" tabindex="0" aria-label="Carica altre recensioni">
          <i aria-hidden="true" class="fas fa-plus"></i> Carica altre recensioni
        </button>
      </div>

      <!-- Messaggio nessuna recensione (nascosto di default) -->
      <div class="no-reviews" id="no-reviews" style="display: none;">
        <i aria-hidden="true" class="fas fa-search"></i>
        <h2>Nessuna recensione trovata</h2>
        <p>Prova a modificare i filtri di ricerca per trovare altre recensioni.</p>
      </div>
    </div>
  </main>

  <!-- FOOTER_PLACEHOLDER -->

  <script src="../js/main.js"></script>
  <script>
    // Script per la gestione dei filtri e caricamento dinamico
    document.addEventListener('DOMContentLoaded', function() {
        const ratingFilter = document.getElementById('rating-filter');
        const searchFilter = document.getElementById('search-filter');
      const sortFilter = document.getElementById('sort-filter');
      const reviewsGrid = document.getElementById('reviews-grid');
      const loadMoreBtn = document.getElementById('load-more-btn');
      const noReviews = document.getElementById('no-reviews');

      // Gestione filtri
      function applyFilters() {
          const rating = ratingFilter.value;
          const search = searchFilter.value.toLowerCase();
        const sort = sortFilter.value;

        const reviews = reviewsGrid.querySelectorAll('.review-card');
        let visibleCount = 0;

          reviews.forEach(review => {
            let show = true;

          // Filtro rating
          if (rating && parseInt(review.dataset.rating) < parseInt(rating)) {
            show = false;
          }

          // Filtro ricerca
          if (search) {
            const title = review.querySelector('.review-title').textContent.toLowerCase();
            const excerpt = review.querySelector('.review-excerpt').textContent.toLowerCase();
            if (!title.includes(search) && !excerpt.includes(search)) {
              show = false;
            }
          }

          review.style.display = show ? 'block' : 'none';
          if (show) visibleCount++;
        });

        // Mostra messaggio se nessuna recensione
        noReviews.style.display = visibleCount === 0 ? 'block' : 'none';
        reviewsGrid.style.display = visibleCount === 0 ? 'none' : 'grid';
      }

      // Event listeners per i filtri
        ratingFilter.addEventListener('change', applyFilters);
        searchFilter.addEventListener('input', applyFilters);
      sortFilter.addEventListener('change', applyFilters);

      // Gestione caricamento altre recensioni
      loadMoreBtn.addEventListener('click', function() {
        // Qui si implementerebbe la chiamata AJAX per caricare altre recensioni
        
        // Simulazione caricamento
        this.innerHTML = '<i aria-hidden="true" class="fas fa-spinner fa-spin"></i> Caricamento...';
        
        setTimeout(() => {
          this.innerHTML = '<i aria-hidden="true" class="fas fa-plus"></i> Carica altre recensioni';
          // Qui si aggiungerebbero le nuove recensioni al DOM
        }, 1000);
      });

      // Gestione click su recensione per aprire dettaglio
      reviewsGrid.addEventListener('click', function(e) {
        const reviewCard = e.target.closest('.review-card');
        if (reviewCard && reviewCard.getAttribute('href')) {
          window.location.href = reviewCard.getAttribute('href');
        }
      });
      reviewsGrid.addEventListener('keydown', function(e) {
        if ((e.key === 'Enter' || e.key === ' ') && e.target.classList.contains('review-card')) {
          e.preventDefault();
          e.target.click();
        }
      });
    });
  </script>
</body>
</html>

